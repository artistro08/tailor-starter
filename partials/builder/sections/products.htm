[collection products]
handle = "Content\Product"

[global]
handle = "Content\Settings"
==
{% if global.enable_shop == true %}
    <section 
            {{ section.html_anchor|length ? 'id="' ~  section.html_anchor  ~ '"' }}
            class="{% if section.css_classes|length %}
                        {% for class in section.css_classes|split(',') %}
                            {{ class ~ ' ' }}
                        {% endfor %}
                   {% endif %}
                   {{ section.style == 'light' ? 'bg-light' }} 
                   {{ section.style == 'dark' ? 'bg-dark text-white' }} 
                   {{ section.disable_top_spacing == true ? 'pt-0' : "pt-4" }} 
                   {{ section.disable_bottom_spacing == true ? 'pb-0' : "pb-4" }}"
    >
        <div class="container">
            <h2 class="text-center mb-4">{{ section.title }}</h2>
            <div class="row row-cols-lg-{{ section.limit }}">
                {% if section.show == "new" %}
                    {% for product in products.orderBy('published_at_date').limit(section.limit).get() %}
                        <div class="col mb-4">
                            <a href="{{ 'product'|page({ product: product.slug }) }}" class="d-block text-decoration-none">
                                <div class="card">
                                    <img
                                            src="{% for image in product.images|slice(0,1) %}{{ image.path|resize(400, 400, {mode: 'crop'}) }}{% endfor %}"
                                            alt="{{ product.title }}" class="card-img-top"
                                    >
                                    <div class="card-body d-flex justify-content-between">
                                        <h3 class="text-decoration-none text-dark fs-5">{{ product.title }}</h3>
                                        <span class="text-decoration-none text-dark fw-bold">{{ settings.currency_symbol_placement == 'before' ? settings.currency_symbol }}{{ product.price }}{{ settings.currency_symbol_placement == 'after' ? settings.currency_symbol }}</span>
                                    </div>
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                {% endif %}
                {% if section.show == "category" %}
                    {% for product in products.whereRelation('categories', 'id', section.product_category_filter.id).limit(section.limit).get() %}
                        <div class="col mb-4">
                            <a href="{{ 'product'|page({ product: product.slug }) }}" class="d-block text-decoration-none">
                                <div class="card">
                                    <img
                                            src="{% for image in product.images|slice(0,1) %}{{ image.path|resize(400, 400, {mode: 'crop'}) }}{% endfor %}"
                                            alt="{{ product.title }}" class="card-img-top"
                                    >
                                    <div class="card-body d-flex justify-content-between">
                                        <h3 class="text-decoration-none text-dark fs-5">{{ product.title }}</h3>
                                        <span class="text-decoration-none text-dark fw-bold">{{ settings.currency_symbol_placement == 'before' ? settings.currency_symbol }}{{ product.price }}{{ settings.currency_symbol_placement == 'after' ? settings.currency_symbol }}</span>
                                    </div>
                                </div>
                            </a>
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </section>
{% endif %}