[global settings]
handle = "Content\Settings"
==
{% set fields = content.form.fields %}
{% set form = content.form %}
<form data-request="onFormSubmit" data-request-data="form_id: {{ content.form.id }}, success_message: '{{ content.form.success_message|escape('js') }}'" data-request-flash>
    {% flash %}
        <div id="forms_flash">{{ message }}</div>
    {% endflash %}
    
    <div class="row">
        {% for field in fields %}
            <div class="col-lg-{{ field.attributes.width == 'half_width' ? '6' : '12' }} mb-2">
                {% if field.attributes.field_type == 'text' %}
                    <label class="form-label" for="{{ field.slug }}">
                        {{ field.label }}
                        {% set index_required = 0 %}
                        {% for validation in field.validation_rules %}
                            {% if (validation.attributes.type == "required" and index_required == 0)  %}
                                <span class="text-danger">*</span>
                                {% set index_required = index_required+1 %}
                            {% endif %}
                        {% endfor %}
                    </label>
                    <input
                            {% set index_number = 0 %}
                            {% set field_type = "text" %}
                            {% for validation in field.validation_rules %}
                                {% if (validation.attributes.type == "numeric" and index_number == 0)  %}
                                    {% set field_type = "number" %}
                                    {% set index_number = index_number+1 %}
                                {% endif %}
                            {% endfor %}
                            type="{{ field_type }}"
                            id="{{ field.slug }}"
                            name="{{ field.slug }}"
                            class="form-control"
                    >
                {% endif %}
                {% if field.attributes.field_type == 'email' %}
                    <label class="form-label" for="{{ field.slug }}">
                        {{ field.label }}
                        {% set index = 0 %}
                        {% for validation in field.validation_rules %}
                            {% if (validation.attributes.type == "required" and index == 0)  %}
                                <span class="text-danger">*</span>
                                {% set index = index+1 %}
                            {% endif %}
                        {% endfor %}
                    </label>
                    <input
                            type="email"
                            id="{{ field.slug }}"
                            name="{{ field.slug }}"
                            class="form-control"
                            
                    >
                {% endif %}
                {% if field.attributes.field_type == 'textarea' %}
                    <label class="form-label" for="{{ field.slug }}">
                        {{ field.label }}
                        {% set index = 0 %}
                        {% for validation in field.validation_rules %}
                            {% if (validation.attributes.type == "required" and index == 0)  %}
                                <span class="text-danger">*</span>
                                {% set index = index+1 %}
                            {% endif %}
                        {% endfor %}
                    </label>
                    <textarea
                            name="{{ field.slug }}"
                            class="form-control"
                            placeholder="Leave a comment here"
                            id="{{ field.slug }}"
                            {{ field.attributes.required == true ? 'required' }}
                            
                    ></textarea>
                {% endif %}
                {% if field.attributes.field_type == 'checkbox' %}
                    <div class="form-check">
                        <input
                                name="{{ field.slug }}"
                                class="form-check-input"
                                type="checkbox"
                                id="{{ field.slug }}"
                                {{ field.attributes.required == true ? 'required' }}
                        >
                        <label class="form-check-label" for="{{ field.slug }}">
                            {{ field.label }}
                            {% set index = 0 %}
                            {% for validation in field.validation_rules %}
                                {% if (validation.attributes.type == "required" and index == 0)  %}
                                    <span class="text-danger">*</span>
                                    {% set index = index+1 %}
                                {% endif %}
                            {% endfor %}
                        </label>
                    </div>
                {% endif %}
                {% if field.attributes.field_type == 'select' %}
                    <label class="form-label" for="{{ field.slug }}">
                        {{ field.label }}
                        {% set index = 0 %}
                        {% for validation in field.validation_rules %}
                            {% if (validation.attributes.type == "required" and index == 0)  %}
                                <span class="text-danger">*</span>
                                {% set index = index+1 %}
                            {% endif %}
                        {% endfor %}
                    </label>
                    <select
                            name="{{ field.slug }}"
                            class="form-select"
                            aria-label="{{ field.label }}"
                            id="{{ field.slug }}"
                            {{ field.attributes.required == true ? 'required' }}
                    >
                        {% for option in field.options %}
                            <option value="{{ option.slug }}" selected>{{ option.label }}</option>
                        {% endfor %}
                    </select>
                {% endif %}
                {% if field.attributes.field_type == 'file' %}
                    <label class="form-label" for="{{ field.slug }}">
                        {{ field.label }}
                        {% set index = 0 %}
                        {% for validation in field.validation_rules %}
                            {% if (validation.attributes.type == "required" and index == 0)  %}
                                <span class="text-danger">*</span>
                                {% set index = index+1 %}
                            {% endif %}
                        {% endfor %}
                    </label>
                    <input
                            name="{{ field.slug }}"
                            class="form-control"
                            type="file"
                            id="{{ field.slug }}"
                            {{ field.attributes.required == true ? 'required' }}
                    >
                {% endif %}
            </div>
        {% endfor %}
    </div>
    
    {% if form.enable_recaptcha == true %}
        <div class="g-recaptcha" data-sitekey="{{ settings.recaptcha_site_key }}"></div>
    {% endif %}
    
    
    <button id="form-{{ content.form.id }}" type="submit" class="btn btn-primary">Submit</button>

</form>
{% if form.enable_recaptcha == true %}
    {% put scripts %}
        <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    {% endput %}
{% endif %}
